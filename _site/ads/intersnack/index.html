<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Intersnack</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="user-scalable=no, width=device-width" />
		<meta http-equiv="Cache-Control" content="no-cache" />
		<style type="text/css">
html {
	overflow: hidden;
}

body {
	margin: 0;
	min-height: 504px;
	color: green;
	overflow: hidden;
	background-size: 100% auto;
}

#container {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	overflow: hidden;
}

.scene img {
	width: 100%;
}

.scene {
	opacity: 0;
	pointer-events: none;
	-webkit-transition: all 1s ease-out;
	position: absolute;
	top: 0;
	width: 100%;
}

#first-scene {
	opacity: 1;
	pointer-events: auto;
}

#fourth-scene {
	-webkit-transform: scale(5);
}

#erasable {
	position: absolute;
	background-image: url(img/fog.jpg);
	background-size: 100% auto;
	opacity: 1;
	-webkit-transition: opacity 0.6s ease-in;
	width: 100%;
	top: 0;
}

#cauldron {
	position: absolute;
	width: 125%;
	top: 230px;
	left: -110px;
	-webkit-transition: all 1s ease-in;
	pointer-events: none;
}

#background {
	position: absolute;
	top: 0;
	height: 100%;
	-webkit-transition: all 12s ease-out;
	pointer-events: none;
}

@-webkit-keyframes move-hero-chip {
	0% {
		-webkit-transform: scale(0.3) rotate(-10deg) translateX(-10px) translateY(0);
	}

	25% {
		-webkit-transform: scale(0.7) rotate(-5deg) translateX(-20px) translateY(-140px);
	}

	40% {
		-webkit-transform: scale(0.9) rotate(0) translateX(0) translateY(-150px);
	}

	50% {
		-webkit-transform: scale(1) rotate(0) translateX(0) translateY(-150px);
	}

	60% {
		-webkit-transform: scale(0.8) rotate(20deg) translateY(-100px) translateX(0);
	}

	100% {
		-webkit-transform: scale(0.3) rotate(10deg) translateY(500px);
	}
}

@-webkit-keyframes move-all-chips {
	0% {
		-webkit-transform: scale(0.9);
	}

	10% {
		-webkit-transform: translateY(-10px);
		-webkit-transform: scale(1);
	}

	90% {
		opacity: 1;
	}

	100% {
		-webkit-transform: scale(5) translateX(-100px);
		opacity: 0;
	}
}

#cta {
	margin-top: 30px;
	width: 100%;
	text-align: center;
	position: absolute;
	pointer-events: none;
}

#cta img {
	width: 60%;
}

#packshot {
	position: fixed;
	bottom: -10px;
	left: -16px;
	width: 110%;
	opacity: 0;
	-webkit-transition: opacity 0.6s ease-in;
	pointer-events: none;
}

#packshot img {
	width: 100%;
}

#mehr-erfahren {
	position: relative;
	top: 5%;
	opacity: 0;
	-webkit-transition: opacity 0.6s ease-in;
	text-align: center;
	pointer-events: none;
}

#mehr-erfahren img {
	width: 180px;
}

#hero-chip {
	position: absolute;
	top: 180px;
	left: 35px;
	width: 250px;
	opacity: 0;
	-webkit-transition: all 1.6s ease-out;
	-webkit-transform: rotate(-60deg);
	pointer-events: none;
}

#packshot-close {
        position: fixed;
        bottom: -40px;
        width: 100%;
        left: 0;
        pointer-events: none;
        -webkit-transform: scale(1) translateY(500px);
        -webkit-transition: all 0.6s ease-out;
}

#all-chips {
	position: absolute;
	top: 350px;
	width: 110%;
	-webkit-transition: all 5s ease-out;
	pointer-events: none;
         opacity: 1;
}

.chip {
	position: absolute;
	width: 50px;
	-webkit-transition: all 1s linear;
	top: -100px;
	-webkit-transform: scale(2);
}

#chip-1 {
	left: -50px;
	-webkit-transition-delay: 420ms;
}

#chip-2 {
	left: 50px;
	-webkit-transition-delay: 280ms;
}


#chip-3 {
	left: 100px;
	-webkit-transition-delay: 100ms;
}

#chip-4 {
	left: 150px;
	-webkit-transition-delay: 170ms;
}

#chip-5 {
	-webkit-transition-delay: 630ms;
	left: 200px;
}

#chip-6 {
	left: 250px;
}

#all-chips-upside-down {
	position: absolute;
	top: 0;
	width: 110%;
	-webkit-transition: all 0.6s ease-in;
	pointer-events: none;
         opacity: 0;
	-webkit-transform: rotate(180deg);
}

#landscape-cover {
	position: absolute;
	top: 0;
	width: 100%;
	height: 100%;
	background-color: black;
	display: none;
	text-align: center;
}

#landscape-cover img {
	width: 50%;
	margin-top: 15%;
}

#logo-small {
	position: fixed;
	bottom: 6px;
	right: 6px;
	width: 44px;
	pointer-events: none;
	-webkit-transition: all 0.6s ease-in;
}

@media all and (orientation:landscape) {
	#landscape-cover {
		display: block;
	}

	
}
/*

        Creating a sprite from following images:
        
        _creatives/pngs-320/sprite-0-320.png (320x219)
        _creatives/pngs-320/sprite-1-320.png (320x224)
        _creatives/pngs-320/sprite-2-320.png (320x180)
        _creatives/pngs-320/sprite-3-320.png (320x180)

        Output files:
          _creatives/pngs-320.png
          _creatives/pngs-320.css

        Output size:
          1280x224


*/
img.sprite-0-320 { width: 320px; height: 219px; background: url(img/sprites.png) 0px -2px no-repeat; }
img.sprite-1-320 { width: 320px; height: 224px; background: url(img/sprites.png) -320px 0px no-repeat; }
img.sprite-2-320 { width: 320px; height: 180px; background: url(img/sprites.png) -640px -22px no-repeat; }
img.sprite-3-320 { width: 320px; height: 180px; background: url(img/sprites.png) -960px -22px no-repeat; }

		</style>
	</head>
	<body>
<div id="container">
	<img id="background" src="img/background.jpg"/>
	<img id="hero-chip" src="img/hero-chip.png"/>
	<img id="all-chips" src="img/all-chips.png"/>
	<img id="cauldron" src="img/cauldron@2x.png" class="cauldron"/>
	<img id="packshot-close" src="img/packshot-close.png"/>
	<canvas id="erasable" width="640" height="1136"></canvas>
	<div id="cta"><img src="img/wischen2.png"/></div>
	<div id="packshot"><img src="img/packshot@2x.png"/></div>
	<div id="mehr-erfahren"><img src="img/mehr-erfahren.png"/></div>
	<img id="logo-small" src="img/logo-small.jpg"/>
	<div id="landscape-cover">
		<img src="img/bitte-drehe.png">
	</div>
</div>
		<script>
/*jslint browser: true, devel: true*/

var firstSceneEl = document.getElementById('first-scene'),
    secondSceneEl = document.getElementById('second-scene'),
    thirdSceneEl = document.getElementById('third-scene'),
    fourthSceneEl = document.getElementById('fourth-scene'),
    fifthSceneEl = document.getElementById('fifth-scene'),
    erasableEl = document.getElementById('erasable'),
    ctaEl = document.getElementById('cta'),
    containerEl = document.getElementById('container'),
    backgroundEl = document.getElementById('background'),
    packshotEl = document.getElementById('packshot'),
    mehrErfahrenEl = document.getElementById('mehr-erfahren'),
    cauldronEl = document.getElementById('cauldron'),
    heroChipEl = document.getElementById('hero-chip'),
    packshotCloseEl = document.getElementById('packshot-close'),
    allChipsEl = document.getElementById('all-chips'),
    logoEl = document.getElementById('logo-small'),

    landingPageURL = '//yoc-ly.appspot.com/5899781826150400',

    context = erasableEl.getContext('2d'),

    containerX = window.innerWidth / 2 - containerEl.offsetWidth / 2,
    containerY = (window.innerHeight / 2 - containerEl.offsetHeight / 2) < 0 ? 0 : (window.innerHeight / 2 - containerEl.offsetHeight / 2),

    initialOpacity = 0.6,

    matrix = [],
    totalPoints = 320 * 568,
    points = 0,
    ratio = 0,

    screenHeight = screen.height >= 568 ? 568 : 480,

    mark = function (x, y) {
        'use strict';
        var i, j;

        for (i = x - 20; i < x + 20; i = i + 1) {
            if (!matrix[i]) {
                matrix[i] = [];
            }

            for (j = y - 20; j < y + 20; j = j + 1) {
                if (matrix[i][j] !== true) {
                    matrix[i][j] = true;
                    points = points + 1;
                    ratio = points / totalPoints;
                }
            }
        }
    },

    get_coord = function (event) {
        'use strict';
        var x = event.touches[0].clientX - containerX,
            y = event.touches[0].clientY - containerY;
        return [2 * x, 2 * y];
    },

    start_path = function (event) {
        'use strict';
        var coord = get_coord(event);
        event.preventDefault();
        context.beginPath();
        context.moveTo(coord[0], coord[1]);
    },

    continue_path = function (event) {
        'use strict';
        event.preventDefault();
        var coord = get_coord(event);
        context.lineTo(coord[0], coord[1]);
        mark(coord[0], coord[1]);
        context.stroke();
    },

    hide_cta = function () {
        'use strict';
        ctaEl.style.display = 'none';
    },

    image = new Image(),

    move_background = function () {
        'use strict';
        backgroundEl.style.webkitTransform = 'translateX(-90px)';
    },

    open_landing_page = function () {
        'use strict';
        window.open(landingPageURL);
    },

    show_seventh_scene = function () {
        'use strict';
        packshotEl.style.opacity = 1;
        mehrErfahrenEl.style.opacity = 1;
        packshotCloseEl.style.opacity = 0;
        window.addEventListener('touchstart', open_landing_page);
        allChipsEl.style.opacity = 0;
        heroChipEl.style.opacity = 0;
        logoEl.style.opacity = 0;
    },

    show_sixth_scene = function () {
        'use strict';
        packshotCloseEl.style.webkitTransform = 'scale(1) translateY(0)';
        heroChipEl.style.webkitTransform = 'scale(0.3) translateY(240px) rotate(130deg)';
        setTimeout(show_seventh_scene, 1500);
    },

    show_fifth_scene = function () {
        'use strict';
        allChipsEl.style.webkitTransitionDuration = '1s';
        allChipsEl.style.webkitTransform = 'translateY(600px)';
        allChipsEl.style.opacity = 0;
        cauldronEl.style.webkitTransform = 'scale(8) translateY(500px)';
        heroChipEl.style.webkitTransform = 'scale(1) translateY(-130px) rotate(0)';
        heroChipEl.style.opacity = 1;
        setTimeout(show_sixth_scene, 1500);
    },

    show_fourth_scene = function () {
        'use strict';
        allChipsEl.style.webkitTransform = 'translateY(-500px) scale(3)';
        setTimeout(show_fifth_scene, 1500);
    },

    show_third_scene = function () {
        'use strict';
        cauldronEl.style.webkitTransform = 'scale(1.7) translateX(10px) translateY(60px)';
        allChipsEl.style.opacity = 1;
        setTimeout(show_fourth_scene, 500);
    },

    show_second_scene = function () {
        'use strict';
        move_background();
        erasableEl.style.opacity = 0;
        setTimeout(show_third_scene, 500);
    },

    trigger_animation = function () {
        'use strict';
        setTimeout(show_second_scene, 4000);
        erasableEl.removeEventListener('touchstart', trigger_animation);
    },

    prepare_canvas = function () {
        'use strict';
        image.src = 'img/no-fog.jpg';
        image.onload = function () {
            var pattern = context.createPattern(this, 'repeat');
            context.strokeStyle = pattern;
        };

        context.lineWidth = 80;
        erasableEl.addEventListener('touchmove', continue_path);
        erasableEl.addEventListener('touchmove', hide_cta);
        erasableEl.addEventListener('touchstart', start_path);
        erasableEl.addEventListener('touchstart', trigger_animation);
    },

    prevent_scroll = function () {
        'use strict';
        window.addEventListener('touchstart', function (event) {
            event.preventDefault();
        });
    },

    hide_navigation_bar = function () {
        'use strict';
        setTimeout(function () {
            window.scrollTo(0, 1);
        }, 0);
    };

window.addEventListener('load', function () {
    'use strict';
    prepare_canvas();
    hide_navigation_bar();
});
		</script>
	</body>
</html>